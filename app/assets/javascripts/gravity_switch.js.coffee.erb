
# GAME CONSTANTS
game =
  tileSize: 16,
  tilesX: 25,
  tilesY: 21

# LOADING SCENE

Crafty.scene 'loading', ->
  # preload our assets
  Crafty.load ['<%= asset_data_uri 'sprite.png' %>'], ->
    
    # turn the sprite map into usable components
    Crafty.sprite(16, "sprite.png", {
        grass1: [0, 0],
        grass2: [1, 0],
        grass3: [2, 0],
        grass4: [3, 0],
        flower: [0, 1],
        bush1: [0, 2],
        bush2: [1, 2],
        player: [0, 3],
        enemy: [0, 3],
        banana: [4, 0],
        empty: [4, 0]
    })
    # display main scene when loaded
    Crafty.scene 'main'
  
  # black background
  Crafty.background '#000'
  
  # display preloading text
  preloader = Crafty.e("2D, DOM, Text")
  preloader.attr w:300, h: 20, x: 50, y: 150
  preloader.text 'Loading Gravity-Switch'
  preloader.css 'text-align': 'center'


# MAIN SCENE

Crafty.scene 'main', ->
  generateWorld()

generateWorld = ->
  

# INITIALIZE

$(document).ready ->
  
  # init stage with size
  Crafty.init game.tileSize * game.tilesX, game.tileSize * game.tilesY
    
  # start with loading scene
  Crafty.scene 'loading'